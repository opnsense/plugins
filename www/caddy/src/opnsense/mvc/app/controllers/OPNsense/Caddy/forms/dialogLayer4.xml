<form>
    <field>
        <id>layer4.enabled</id>
        <label>Enabled</label>
        <type>checkbox</type>
        <help><![CDATA[Enable this Layer4 route.]]></help>
    </field>
    <field>
        <id>layer4.FromDomain</id>
        <label>Domain</label>
        <type>select_multiple</type>
        <style>tokenize</style>
        <allownew>true</allownew>
        <help><![CDATA[Enter one or multiple domains to route via SNI. The domain will be added to the "listener_wrapper". Essentially, all traffic that Caddy receives on its frontend listeners (most likely the default HTTP and HTTPS ports) is funnelled through this wrapper to be processed and routed. Wildcard domains are allowed, e.g. "*.example.com". Host wildcards are allowed too, e.g. "*".]]></help>
    </field>
    <field>
        <id>layer4.Matchers</id>
        <label>Matchers</label>
        <type>dropdown</type>
        <help><![CDATA[Match the traffic of the selected domains. The TCP/UDP packets will be routed to the selected upstream domains (without terminating TLS or altering the traffic). Only protocols that send a Client Hello - like TLS - can be routed here. Routing Logic: 1. The matcher "SNI" will route all selected domains to the selected upstreams. 2. The matcher "not SNI" inverts the match of "SNI" and will always be evaluated after it. It will route any unmatched domains to the selected upstream and all matched domains will fall through to the next routing step. 3. All unmatched domains will be routed to the default "Domains" or "Subdomains" tab, where they can be routed by "HTTP Handlers". If all domains are matched, they will be handled exclusively by Layer4 routes.]]></help>
    </field>
    <field>
        <id>layer4.ToDomain</id>
        <label>Upstream Domain</label>
        <type>select_multiple</type>
        <style>tokenize</style>
        <allownew>true</allownew>
        <help><![CDATA[Enter a domain name or IP address of the upstream destination. If multiple are chosen, they will be load balanced with the default random policy.]]></help>
    </field>
    <field>
        <id>layer4.ToPort</id>
        <label>Upstream Port</label>
        <type>text</type>
        <help><![CDATA[Choose a custom port for the upstream destination.]]></help>
    </field>
    <field>
        <id>layer4.description</id>
        <label>Description</label>
        <type>text</type>
        <help><![CDATA[Enter a description for this Layer4 route.]]></help>
    </field>
    <field>
        <type>header</type>
        <label>Health Check</label>
        <collapse>true</collapse>
    </field>
    <field>
        <id>layer4.PassiveHealthFailDuration</id>
        <label>Upstream Fail Duration</label>
        <type>text</type>
        <help><![CDATA[Enables a passive health check when multiple destinations in "Upstream Domain" are set. "Fail Duration" is a value that defines how long to remember a failed request. A duration of 1 or more seconds enables passive health checking; the default is empty (off). A reasonable starting point might be 30s to balance error rates with responsiveness when bringing an unhealthy upstream back online.]]></help>
    </field>
    <field>
        <type>header</type>
        <label>Proxy Protocol</label>
        <collapse>true</collapse>
    </field>
    <field>
        <id>layer4.ProxyProtocol</id>
        <label>Proxy Protocol</label>
        <type>dropdown</type>
        <help><![CDATA[Add the HA Proxy Protocol header. Either version 1 or 2 can be chosen. The default is off, since it is only needed when the upstream can use the Proxy Protocol header.]]></help>
    </field>
</form>
