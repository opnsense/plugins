!function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=28)}([function(t,n,e){var o=e(2),r=e(4),i=/[&<>"']/g,c=RegExp(i.source);t.exports=function(t){return(t=r(t))&&c.test(t)?t.replace(i,o):t}},function(t,n,e){var o=e(6).Symbol;t.exports=o},function(t,n,e){var o=e(3)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=o},function(t,n){t.exports=function(t){return function(n){return null==t?void 0:t[n]}}},function(t,n,e){var o=e(5);t.exports=function(t){return null==t?"":o(t)}},function(t,n,e){var o=e(1),r=e(9),i=e(10),c=e(11),l=1/0,u=o?o.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(n){if("string"==typeof n)return n;if(i(n))return r(n,t)+"";if(c(n))return s?s.call(n):"";var e=n+"";return"0"==e&&1/n==-l?"-0":e}},function(t,n,e){var o=e(7),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();t.exports=i},function(t,n,e){(function(n){var e="object"==typeof n&&n&&n.Object===Object&&n;t.exports=e}).call(this,e(8))},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n){t.exports=function(t,n){for(var e=-1,o=null==t?0:t.length,r=Array(o);++e<o;)r[e]=n(t[e],e,t);return r}},function(t,n){var e=Array.isArray;t.exports=e},function(t,n,e){var o=e(12),r=e(15),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||r(t)&&o(t)==i}},function(t,n,e){var o=e(1),r=e(13),i=e(14),c="[object Null]",l="[object Undefined]",u=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?l:c:u&&u in Object(t)?r(t):i(t)}},function(t,n,e){var o=e(1),r=Object.prototype,i=r.hasOwnProperty,c=r.toString,l=o?o.toStringTag:void 0;t.exports=function(t){var n=i.call(t,l),e=t[l];try{t[l]=void 0;var o=!0}catch(t){}var r=c.call(t);return o&&(n?t[l]=e:delete t[l]),r}},function(t,n){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},function(t,n){t.exports=function(t){return null!=t&&"object"==typeof t}},,,,,,,,function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div>\n    <div class="col-md-12">\n        <h2>'+(null==(__t=_.escape(ua))?"":__t)+'</h2>\n    </div>\n</div>\n<div>\n    <div class="col-md-9">\n        <div class="content_holder"></div>\n    </div>\n    <div class="col-md-3">\n        <svg class="chart_holder"></svg>\n    </div>\n</div>\n';return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)"undefined"!=typeof count&&"undefined"!=typeof ciphers&&"undefined"!=typeof curves&&(__p+='\n<div>\n    <div class="col-md-10">\n        <div class="row">\n            <div class="col-md-3">\n                Count\n            </div>\n            <div class="col-md-9">'+(null==(__t=_.escape(count||""))?"":__t)+'</div>\n            <div class="col-md-3">\n                Ciphers\n            </div>\n            <div class="col-md-9">'+(null==(__t=_.escape(ciphers||""))?"":__t)+'</div>\n            <div class="col-md-3">\n                Curves\n            </div>\n            <div class="col-md-9">'+(null==(__t=_.escape(curves||""))?"":__t)+'</div>\n        </div>\n    </div>\n    <div class="col-md-2">\n        <button class="btn btn-primary"><i class="fa fa-thumbs-up"></i> Store / Trust</button>\n    </div>\n</div>\n'),__p+="\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div>\n    <table>\n        <tr>\n            <td><label>Description</label></td>\n            <td><input type="text" id="fp_description" /></td>\n        </tr>\n        <tr>\n            <td><label>Trusted</label></td>\n            <td><input type="checkbox" id="fp_trusted" /></td>\n        </tr>\n    </table>\n</div>\n';return __p}},,,function(t,n,e){"use strict";e.r(n);var o=Backbone.Model.extend({url:"/api/nginx/logs/tls_handshakes"}),r=e(23),i=e.n(r),c=e(24),l=e.n(c),u=e(25),s=e.n(u);const a=new o,d=Backbone.View.extend({initialize:function(t){this.ua=t.ua},events:{"click button":"trust_fingerprint"},render:function(){this.$el.html(l()(this.model.toJSON()))},trust_fingerprint:function(){const t=this;BootstrapDialog.show({type:BootstrapDialog.TYPE_INFO,title:"Save new fingerprint",message:$("<div></div>").html(s()({})),buttons:[{label:"Save",cssClass:"btn-primary",icon:"fa fa-floppy-o ",action:function(n){t.handle_trust(n.$modalBody.find("#fp_description").val(),n.$modalBody.find("#fp_trusted").is(":checked")),n.close()}},{label:"Close",action:function(t){t.close()}}]})},handle_trust:function(t,n){ajaxCall("/api/nginx/settings/addtls_fingerprint",{tls_fingerprint:{curves:this.model.get("curves"),ciphers:this.model.get("ciphers"),user_agent:this.ua,trusted:n?"1":"0",description:t}},function(t,n){})}}),p=Backbone.View.extend({initialize:function(t){this.ua=t.ua,this.render()},render:function(){const t=this;this.$el.html(i()({ua:this.ua}));const n=this.$el.find(".content_holder"),e=this.$el.find(".chart_holder"),o=this.collection.map(function(t){return{label:t.get("ciphers")+"||"+t.get("curves"),value:t.get("count")}});this.collection.forEach(function(e){const o=new d({model:e,ua:t.ua});n.append(o.$el),o.render()});try{nv.addGraph(function(){const t=nv.models.pieChart();return t.x(function(t){return t.label}),t.y(function(t){return t.value}),t.showLabels(!1),t.labelType("value"),t.donut(!0),t.donutRatio(.2),d3.select(e[0]).datum(o).transition().duration(350).call(t),t})}catch(t){console.log(t)}}}),f=new(Backbone.View.extend({initialize:function(){this.listenTo(this.model,"sync",this.render)},render:function(){this.$el.html(""),this.render_all(this.model.attributes)},render_all(t){for(const n in t)if(t.hasOwnProperty(n)&&void 0!==t[n]&&"function"!=typeof t[n]){const e=new Backbone.Collection(t[n]),o=new p({collection:e,ua:n});this.$el.append(o.$el)}}}))({model:a});$("#tls_handshakes_application").append(f.$el),a.fetch()}]);