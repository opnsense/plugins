!function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){var i=n(2),l=n(4),o=/[&<>"']/g,a=RegExp(o.source);e.exports=function(e){return(e=l(e))&&a.test(e)?e.replace(o,i):e}},function(e,t,n){var i=n(6).Symbol;e.exports=i},function(e,t,n){var i=n(3)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=i},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},function(e,t,n){var i=n(5);e.exports=function(e){return null==e?"":i(e)}},function(e,t,n){var i=n(1),l=n(9),o=n(10),a=n(11),s=1/0,r=i?i.prototype:void 0,_=r?r.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return l(t,e)+"";if(a(t))return _?_.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e,t,n){var i=n(7),l="object"==typeof self&&self&&self.Object===Object&&self,o=i||l||Function("return this")();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(8))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,l=Array(i);++n<i;)l[n]=t(e[n],n,e);return l}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i=n(12),l=n(15),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||l(e)&&i(e)==o}},function(e,t,n){var i=n(1),l=n(13),o=n(14),a="[object Null]",s="[object Undefined]",r=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:r&&r in Object(e)?l(e):o(e)}},function(e,t,n){var i=n(1),l=Object.prototype,o=l.hasOwnProperty,a=l.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(e){}var l=a.call(e);return i&&(t?e[s]=n:delete e[s]),l}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='\n<a data-toggle="dropdown"\n   href="#"\n   class="dropdown-toggle pull-right visible-lg-inline-block visible-md-inline-block visible-xs-inline-block visible-sm-inline-block"\n   role="button">\n    <b><span class="caret"></span></b>\n</a>\n<a data-toggle="tab"\n   class="visible-lg-inline-block visible-md-inline-block visible-xs-inline-block visible-sm-inline-block mainentry"\n   style="border-right: 0px;"><b>'+(null==(__t=_.escape(name))?"":__t)+'</b></a>\n<ul class="dropdown-menu" role="menu" id="tab_'+(null==(__t=_.escape(id))?"":__t)+'">\n    ',model.forEach(function(e){__p+='\n    <li>\n        <a data-toggle="tab"\n           class="menuEntry"\n           data-model-cid="'+(null==(__t=e.cid)?"":__t)+'"\n           data-model-uuid="'+(null==(__t=_.escape(id))?"":__t)+'"\n           data-model-fileno="'+(null==(__t=e.escape("number"))?"":__t)+'"\n           id="subtab_item_'+(null==(__t=_.escape(id))?"":__t)+"_"+(null==(__t=e.escape("number"))?"":__t)+'"\n           href="#subtab_'+(null==(__t=_.escape(id))?"":__t)+'">'+(null==(__t=e.escape("date"))?"":__t)+"</a>\n    </li>\n    "}),__p+="\n</ul>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='\n<a data-toggle="tab"\n   class="visible-lg-inline-block visible-md-inline-block visible-xs-inline-block visible-sm-inline-block mainentry"\n   style="border-top-right-radius: 10px !important; padding-right: 10px !important;">\n    <b>'+(null==(__t=_.escape(name))?"":__t)+"</b>\n</a>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<td class="time">'+(null==(__t=model.escape("time"))?"":__t)+'</td>\n<td class="remote_ip">'+(null==(__t=model.escape("remote_ip"))?"":__t)+'</td>\n<td class="username">'+(null==(__t=model.escape("username"))?"":__t)+'</td>\n<td class="status">'+(null==(__t=model.escape("status"))?"":__t)+'</td>\n<td class="size">'+(null==(__t=model.escape("size"))?"":__t)+'</td>\n<td class="referer">'+(null==(__t=model.escape("http_referer"))?"":__t)+'</td>\n<td class="user_agent">'+(null==(__t=model.escape("user_agent"))?"":__t)+'</td>\n<td class="forwarded_for">'+(null==(__t=model.escape("forwarded_for"))?"":__t)+'</td>\n<td class="request_line">'+(null==(__t=model.escape("request_line"))?"":__t)+"</td>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<td class="time">'+(null==(__t=model.escape("time"))?"":__t)+'</td>\n<td class="remote_ip">'+(null==(__t=model.escape("remote_ip"))?"":__t)+'</td>\n<td class="status">'+(null==(__t=model.escape("status"))?"":__t)+'</td>\n<td class="bytes_sent">'+(null==(__t=model.escape("bytes_sent"))?"":__t)+'</td>\n<td class="bytes_received">'+(null==(__t=model.escape("bytes_received"))?"":__t)+'</td>\n<td class="session_time">'+(null==(__t=model.escape("session_time"))?"":__t)+"</td>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<td class="date">'+(null==(__t=model.escape("date"))?"":__t)+'</td>\n<td class="time">'+(null==(__t=model.escape("time"))?"":__t)+'</td>\n<td class="severity">'+(null==(__t=model.escape("severity"))?"":__t)+'</td>\n<td class="number">'+(null==(__t=model.escape("number"))?"":__t)+'</td>\n<td class="message">'+(null==(__t=model.escape("message"))?"":__t)+"</td>\n";return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){let count=0;__p+='<table class="table table-striped">\n    <thead class="sticky-top">\n        <tr>\n            ',"errors"===log_type||"stream_errors"===log_type?(count=5,__p+="\n            <th>Date</th>\n            <th>Time</th>\n            <th>Severity</th>\n            <th>Number</th>\n            <th>Message</th>\n            "):"accesses"===log_type?(count=9,__p+="\n            <th>Time</th>\n            <th>Remote IP</th>\n            <th>Username</th>\n            <th>Status</th>\n            <th>Size</th>\n            <th>Referer</th>\n            <th>User Agent</th>\n            <th>Forwarded For</th>\n            <th>Request Line</th>\n            "):(count=6,__p+="\n            <th>Time</th>\n            <th>Remote IP</th>\n            <th>Status</th>\n            <th>Bytes Sent</th>\n            <th>Bytes Received</th>\n            <th>Session Time</th>\n            "),__p+='\n        </tr>\n        <tr class="filter">\n            ',"errors"===log_type||"stream_errors"===log_type?__p+='\n            <th><input type="text" value="'+(null==(__t=model.escape("date"))?"":__t)+'" name="date" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("time"))?"":__t)+'" name="time" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("severity"))?"":__t)+'" name="severity" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("number"))?"":__t)+'" name="number" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("message"))?"":__t)+'" name="message" /></th>\n            ':"accesses"===log_type?__p+='\n            <th><input type="text" value="'+(null==(__t=model.escape("time"))?"":__t)+'" name="time" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("remote_ip"))?"":__t)+'" name="remote_ip" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("username"))?"":__t)+'" name="username" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("status"))?"":__t)+'" name="status" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("size"))?"":__t)+'" name="size" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("http_referer"))?"":__t)+'" name="http_referer" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("user_agent"))?"":__t)+'" name="user_agent" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("forwarded_for"))?"":__t)+'" name="forwarded_for" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("request_line"))?"":__t)+'" name="request_line" /></th>\n            ':__p+='\n            <th><input type="text" value="'+(null==(__t=model.escape("time"))?"":__t)+'" name="time" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("remote_ip"))?"":__t)+'" name="remote_ip" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("status"))?"":__t)+'" name="status" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("bytes_sent"))?"":__t)+'" name="bytes_sent" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("bytes_received"))?"":__t)+'" name="bytes_received" /></th>\n            <th><input type="text" value="'+(null==(__t=model.escape("session_time"))?"":__t)+'" name="session_time" /></th>\n            ',__p+='\n        </tr>\n    </thead>\n    <tbody>\n    </tbody>\n    <tfoot class="sticky-bottom">\n        <tr>\n            <th class="text-nowrap">\n                <button class="btn btn-primary" id="paging_first"><i class="fa fa-fast-backward" aria-hidden="true"></i></button>\n                <button class="btn btn-primary" id="paging_back"><i class="fa fa-step-backward" aria-hidden="true"></i></button>\n                <button class="btn btn-primary" id="paging_forward"><i class="fa fa-step-forward" aria-hidden="true"></i></button>\n                <button class="btn btn-primary" id="paging_last"><i class="fa fa-fast-forward " aria-hidden="true"></i></button>\n            </th>\n            <th>\n                Page <span id="currentpage">1</span>/<span id="pagecount">0</span>\n            </th>\n            <th colspan="2">\n                <label for="entrycount"><span id="entrycountdisplay">100</span> lines per page</label>\n                <input type="range" list="tickmarks" min="5" max="1000" step="5" id="entrycount" value="100" />\n                <datalist id="tickmarks">\n                    <option value="5" label="5">\n                    <option value="100" label="100">\n                    <option value="200" label="200">\n                    <option value="300">\n                    <option value="400">\n                    <option value="500" label="500">\n                    <option value="600">\n                    <option value="700">\n                    <option value="800">\n                    <option value="900">\n                    <option value="1000" label="1000">\n                </datalist>\n            </th>\n            <th colspan="'+(null==(__t=count-4)?"":__t)+'">Found lines: <span id="resultcount">0</span>/<span id="totalcount">0</span></th>\n        </tr>\n    </tfoot>\n</table>\n'}return __p}},function(module,exports,__webpack_require__){var _={escape:__webpack_require__(0)};module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div style="text-align: center;">\n    No data available...\n</div>\n';return __p}},,,,function(e,t,n){"use strict";n.r(t);var i=Backbone.Model.extend({});var l=Backbone.Collection.extend({model:i,url:function(){return`/api/nginx/logs/${this.logType}`},initialize:function(e){this.logType=e.logType}}),o=Backbone.Model.extend({});var a=Backbone.Collection.extend({model:o,url:function(){return`/api/nginx/logs/${this.logType}/${this.uuid}`},initialize:function(e){this.logType=e.logType,this.uuid=e.uuid}}),s=n(16),r=n.n(s);var _=Backbone.View.extend({tagName:"li",events:{"click .mainentry":"mainMenuClick","click .menuEntry":"menuEntryClick"},initialize:function(e){this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"update",this.render),this.logType=e.logType,this.logview=e.logview},render:function(){this.$el.html(""),this.renderCollection()},renderCollection:function(){this.$el.addClass("dropdown"),this.$el.html(""),this.$el.append(r()({model:this.collection,id:this.model.get("id"),name:this.model.has("server_name")?this.model.get("server_name"):"Port "+this.model.get("port")}))},mainMenuClick:function(){this.collection.models[0]&&(this.handleElementClick(this.model.get("id"),this.collection.models[0].get("number")),$(`#tab_${this.model.get("id")} li`).removeClass("active"),$(`#subtab_item_${this.model.get("id")}_${this.collection.models[0].get("number")}`).parent().addClass("active"))},menuEntryClick:function(e){this.handleElementClick(e.target.dataset.modelUuid,e.target.dataset.modelFileno)},handleElementClick:function(e,t){this.logview.get_log(this.logType,e,t)}}),c=n(17),u=n.n(c);var p=Backbone.View.extend({tagName:"li",initialize:function(e){this.logview=e.logview,this.log_name=e.log_name,this.visible_name=e.visible_name,this.log_type=e.log_type},events:{"click .mainentry":"handleElementClick"},log_name:null,log_type:null,visible_name:null,render:function(){this.$el.html(u()({name:this.visible_name}))},handleElementClick:function(){this.logview.get_log(this.log_type,this.log_name)}});var d=Backbone.View.extend({tagName:"ul",className:"nav nav-tabs",initialize:function(e){this.listenTo(this.collection,"sync",this.render),this.listenTo(this.collection,"update",this.render),this.logview=e.logview,this.logType=e.logType},render:function(){this.$el.attr("role","tablist"),this.$el.html(""),"global"==this.logType?this.render_single_tabs():this.collection.forEach(e=>this.render_one(e))},render_one:function(e){const t=new a({uuid:e.get("id"),logType:this.logType}),n=new _({collection:t,model:e,logType:this.logType,logview:this.logview});this.$el.append(n.$el),t.fetch()},render_single_tabs:function(){const e=new p({logview:this.logview,log_name:"global",visible_name:"Global Error Log",log_type:"errors"});e.render(),this.$el.append(e.$el)}}),h=n(18),m=n.n(h),g=n(19),b=n.n(g),f=n(20),y=n.n(f),v=n(21),x=n.n(v);var w=Backbone.Model.extend({});var k=Backbone.Collection.extend({model:w,url:function(){return`/api/nginx/logs/${this.logType}/${this.uuid}/${this.fileNo}/${this.page}/${this.pageSize}/${this.create_filter()}`},initialize:function(){this.logType="none",this.uuid="none",this.fileNo=-1,this.page=0,this.pageSize=0,this.filter_model=new Backbone.Model},parse:function(e){return"error"in e?[]:(this.page_count=e.pages,this.total_entries=e.total,this.displayed_entries=e.found,e.lines)},create_filter:function(){return JSON.stringify(this.filter_model)}}),j=n(22),T=n.n(j);const C=Backbone.View.extend({tagName:"tr",initialize:function(e){this.type=e.type},render:function(){this.$el.html(this.get_template()({model:this.model}))},get_template:function(){return"accesses"===this.type?m.a:"stream_accesses"===this.type?b.a:y.a}});const S=new(Backbone.View.extend({tagName:"div",className:"content-box tab-content",events:{"keyup .filter input":"update_filter","click #paging_first":"page_first","click #paging_back":"page_back","click #paging_forward":"page_forward","click #paging_last":"page_last","change #entrycount":"change_entry_count"},page_entry_count:100,current_page:0,filter_delay:-1,initialize:function(){this.collection=new k,this.listenTo(this.collection,"sync",this.clear_and_render),this.listenTo(this.collection,"update",this.clear_and_render),this.listenTo(this.collection.filter_model,"change",this.clear_and_render),this.type=""},render:function(){let e=this.$("tbody");e.length<1?0!==this.collection.length?(this.$el.html(x()({log_type:this.type,model:this.collection.filter_model})),e=this.$("tbody")):this.$el.html(T.a):e.html(""),0!==this.collection.length&&(null==this.current_filtered_collection&&this.collection.forEach(t=>this.render_one(e,t)),this.$("#entrycountdisplay").html(this.page_entry_count),this.$("#currentpage").html(this.current_page+1),this.$("#pagecount").html(this.collection.page_count+1),this.$("#totalcount").html(this.collection.total_entries),this.$("#resultcount").html(this.collection.displayed_entries),this.current_page>=this.collection.page_count?(this.$("#paging_last").addClass("disabled"),this.$("#paging_forward").addClass("disabled")):(this.$("#paging_last").removeClass("disabled"),this.$("#paging_forward").removeClass("disabled")),this.current_page<=0?(this.$("#paging_back").addClass("disabled"),this.$("#paging_first").addClass("disabled")):(this.$("#paging_back").removeClass("disabled"),this.$("#paging_first").removeClass("disabled")))},render_one:function(e,t){const n=new C({type:this.type,model:t});n.render(),e.append(n.$el)},get_log:function(e,t,n){this.collection.uuid=t,this.collection.logType=e,this.collection.fileNo=n,this.type=e,this.$el.html(""),this.collection.filter_model.clear(),this.update()},update:function(){this.collection.page=this.current_page,this.collection.pageSize=this.page_entry_count,this.collection.fetch()},clear_and_render:function(){this.render()},update_filter:function(e){clearTimeout(this.filter_delay);const t=e.target;this.collection.filter_model.set(t.name,$(t).val()),this.current_page=0,this.filter_delay=setTimeout(function(e){e.update()},500,this)},page_first:function(){this.current_page=0,this.update()},page_back:function(){this.current_page>0&&(this.current_page--,this.update())},page_forward:function(){this.current_page<this.collection.page_count&&(this.current_page++,this.update())},page_last:function(){this.current_page=this.collection.page_count,this.update()},change_entry_count:function(e){this.page_entry_count=e.target.value,this.current_page=0,this.update()}})),q=$("#logapplication").data("log"),z=new l({logType:q}),O=new d({collection:z,logview:S,logType:q});$("#logapplication").append(O.$el).append(S.$el),z.fetch(),O.render()}]);