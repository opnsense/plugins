#!/bin/sh

# This deinstall script removes all generated template files since they are unknown by pkg.

# Remove the /etc/rc.conf.d/caddy file
if [ -f /etc/rc.conf.d/caddy ]; then
    echo "Removing file: /etc/rc.conf.d/caddy"
    rm -f /etc/rc.conf.d/caddy
fi

# Remove the /usr/local/etc/syslog-ng.conf.d/caddy.conf file
if [ -f /usr/local/etc/syslog-ng.conf.d/caddy.conf ]; then
    echo "Removing file: /usr/local/etc/syslog-ng.conf.d/caddy.conf"
    rm -f /usr/local/etc/syslog-ng.conf.d/caddy.conf
fi

# Trigger a syslog-ng restart to remove the caddy unix socket cleanly
echo "restart syslog-ng"
configctl syslog restart

echo "Caddy deinstallation completed."
