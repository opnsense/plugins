# DO NOT EDIT THIS FILE -- OPNsense auto-generated file
{% set general = helpers.getNodeByTag('OPNsense.ndpproxy.general') %}
{% if general.enabled|default("0") == "1" and general.upstream and general.downstream %}
ndp_proxy_go_enable="YES"
ndp_proxy_go_upstream="{{ helpers.physical_interface(general.upstream) }}"
{%     set downstream_interfaces = [] %}
{%     for interface in general.downstream.split(',') %}
{%         do downstream_interfaces.append(helpers.physical_interface(interface)) %}
{%     endfor %}
ndp_proxy_go_downstream="{{ downstream_interfaces|join(' ') }}"
{%     set flags = [] %}
{%     if general.debug|default("0") == "1" %}
{%         do flags.append('--debug') %}
{%     endif %}
{%     if general.no_ra|default("0") == "1" %}
{%         do flags.append('--no-ra') %}
{%     endif %}
{%     if general.no_dad|default("0") == "1" %}
{%         do flags.append('--no-dad') %}
{%     endif %}
{%     if general.no_routes|default("0") == "1" %}
{%         do flags.append('--no-routes') %}
{%     endif %}
{%     if general.cache_ttl %}
{%         do flags.append('--cache-ttl ' ~ general.cache_ttl ~ 'm') %}
{%     endif %}
{%     if general.cache_max %}
{%         do flags.append('--cache-max ' ~ general.cache_max) %}
{%     endif %}
{%     if general.route_qps %}
{%         do flags.append('--route-qps ' ~ general.route_qps) %}
{%     endif %}
{%     if general.route_burst %}
{%         do flags.append('--route-burst ' ~ general.route_burst) %}
{%     endif %}
{%     if general.pcap_timeout %}
{%         do flags.append('--pcap-timeout ' ~ general.pcap_timeout ~ 'ms') %}
{%     endif %}
{%     if flags|length > 0 %}
ndp_proxy_go_flags="{{ flags|join(' ') }}"
{%     endif %}
{% else %}
ndp_proxy_go_enable="NO"
{% endif %}
