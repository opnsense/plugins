{% if helpers.exists('OPNsense.wireguard.general.enabled') and OPNsense.wireguard.general.enabled == '1' %}

{% if helpers.exists('OPNsense.wireguard.server.servers.server') %}
{%   for server_list in helpers.toList('OPNsense.wireguard.server.servers.server') %}
{%     if TARGET_FILTERS['OPNsense.wireguard.server.servers.server.' ~ loop.index0] or TARGET_FILTERS['OPNsense.wireguard.server.servers.server'] %}
{%       if server_list.enabled == '1' %}
[Interface]
Address = {{ server_list.tunneladdress }}
PrivateKey = {{ server_list.privkey }}
ListenPort = {{ server_list.port }}
{%       endif %}
{%     endif %}
{%   endfor %}
{% endif %}

{% endif %}
