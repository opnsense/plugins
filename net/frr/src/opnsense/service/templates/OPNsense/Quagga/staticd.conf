{% if helpers.exists('OPNsense.quagga.staticd.enabled') and OPNsense.quagga.staticd.enabled == '1' %}
{% from 'OPNsense/Macros/interface.macro' import physical_interface %}
!
! staticd Zebra config autogenerated by OPNsense
!
{%   if helpers.exists('OPNsense.quagga.general') %}
{%     if helpers.exists('OPNsense.quagga.general.enablesyslog') and OPNsense.quagga.general.enablesyslog == '1' %}
log syslog {{ OPNsense.quagga.general.sysloglevel }}
{%     endif %}
{%     if helpers.exists('OPNsense.quagga.general.profile') %}
frr defaults {{ OPNsense.quagga.general.profile }}
{%     endif %}
{%   endif %}
!
{%   if helpers.exists('OPNsense.quagga.staticd.iproutes.iproute') %}
{%     for route in helpers.toList('OPNsense.quagga.staticd.iproutes.iproute') %}
{%       if route.enabled == '1' %}
{%         if 'gateway' in route and route.gateway != '' %}
ip route {{ route.iproute }} {{ route.gateway}} {{ physical_interface(route.interfacename) }}
{%         else %}
ip route {{ route.iproute }} {{ physical_interface(route.interfacename) }}
{%         endif %}
{%       endif %}
{%     endfor %}
{%   endif %}
!
{%   if helpers.exists('OPNsense.quagga.staticd.ip6routes.ip6route') %}
{%     for route6 in helpers.toList('OPNsense.quagga.staticd.ip6routes.ip6route') %}
{%       if route6.enabled == '1' %}
{%         if 'gateway' in route6 and route6.gateway != '' %}
ipv6 route {{ route6.ip6route }} {{ route6.gateway}} {{ physical_interface(route6.interfacename) }}
{%         else %}
ipv6 route {{ route6.ip6route }} {{ physical_interface(route6.interfacename) }}
{%         endif %}
{%       endif %}
{%     endfor %}
{%   endif %}
!
{% endif %}
